# Расчёт отчетной формы 101

## Описание
Реализация расчётной отчетной формы 101 за январь 2018 года на основе витрин оборотов и остатков слоя DM.
Расчёт выполнен с использованием хранимой процедуры PostgreSQL с возможностью повторного запуска и логированием этапов выполнения.

## Структура проекта
- `create_f101_table.py` - создание таблицы DM.DM_F101_ROUND_F
- `create_f101_procedure.py` - создание процедуры расчёта 101 формы
- `calculate_f101_january.py` - запуск расчёта за январь 2018 года
- `clear_f101.py` - очистка данных перед перерасчётом
- `config.py` - конфигурация подключения к БД
- `video_link1_3.txt` - ссылка на демонстрационное видео

## Запуск
1. Создание таблицы и процедуры
```bash
python create_f101_table.py
python create_f101_procedure.py
```
2. Очистка данных (при необходимости)
```bash
python clear_f101.py
```
3. Расчёт 101 формы за январь 2018 года
```bash
python calculate_f101_january.py
```

## Описание расчёта
Отчетная форма 101 формируется за отчетный период **январь 2018 года**.  
В процедуру передается отчетная дата — **01.02.2018** (первый день месяца, следующего за отчетным).

При расчёте:
- данные агрегируются по балансовым счетам второго порядка;
- учитываются все счета, действующие в отчетном периоде;
- раздельно рассчитываются показатели для:
  - рублевых счетов;
  - валютных счетов;
- формируются входящие остатки, обороты и исходящие остатки.

## Особенности
В процедуре расчёта реализовано логирование:
- наименования отчёта;
- даты расчёта;
- времени начала и окончания выполнения.

Перед каждым запуском расчёта:
- данные за отчетную дату удаляются, что позволяет безопасно выполнять перерасчёт.

## Демонстрация работы
Ссылка на демонстрационное видео находится в файле video_link1_3.txt.
В видео показано:
- создание таблицы формы 101;
- запуск процедуры расчёта;
- появление данных в витрине;
- процесс логирования расчёта.
